<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dead-lock</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <style type="text/css">body {background-color: #fffaf0;}:root {--font-family: iosevka, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Fira Sans, Droid Sans,Helvetica Neue, sans-serif;font-weight: 400;font-size: 14px;}* {color: #172b4d;}ul {list-style-type: none;padding-left: 2em;}li::before {content: '- ';}h1,h2,h3,h4,h5,h6,p,li,code,table {font-family: var(--font-family);}tr,th {padding-left: 0.25em;padding-right: 0.25em;}.important {border-bottom: 2px solid salmon;box-sizing: border-box;}.center-block {display: flex;justify-content: center;align-items: center;}.center-text {text-align: center;}.shift-level-1 {margin-left: 2em;}.shift-level-2 {margin-left: 4em;}.shift-level-3 {margin-left: 6em;}.shift-level-4 {margin-left: 8em;}.shift-level-5 {margin-left: 10m;}.shift-level-6 {margin-left: 12em;}body {padding: 0.5em;}p {margin: 0.5em;}h1,h2,h3,h4,h5,h6 {padding-left: 0.5rem;border-left: 0.25em solid salmon;}h1 {font-size: 24px;line-height: 1.25;font-weight: 500;text-transform: none;color: #172b4d;}h2 {font-weight: 500;text-transform: none;font-size: 20px;line-height: 1.5;color: #172b4d;}h3 {font-size: 16px;font-weight: 500;line-height: 1.25;text-transform: none;color: #172b4d;}h4 {font-size: 14px;line-height: 1.42857143;font-weight: 600;text-transform: none;color: #172b4d;}h5 {color: #172b4d;font-weight: 600;text-transform: none;font-size: 12px;line-height: 1.66666667;}h6 {font-size: 12px;line-height: 1.66666667;color: #6b778c;font-weight: 600;text-transform: none;}cite {font-size: 14px;font-weight: 400;line-height: 1.42857143;color: #172b4d;font-style: italic;}bq {box-sizing: border-box;border-left: 0.25em solid #dfe1e6;color: #7a869a;margin-left: 1em;padding-left: 1em;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="deadlock">Deadlock</h1>
<p>Deadlock is a situation where a set of processes are blocked because each process is holding a resource and waiting for another resource acquired by some other process.</p>
<p>Deadlock can arise if the following four conditions hold simultaneously (Necessary Conditions)</p>
<ul>
<li><strong>Mutual Exclusion</strong>: One or more than one resource is non-sharable (Only one process can use at a time)</li>
<li><strong>Hold and Wait</strong>: A process is holding at least one resource and waiting for resources.</li>
<li><strong>No Preemption</strong>: A resource cannot be taken from a process unless the process releases the resource.</li>
<li><strong>Circular Wait</strong>: A set of processes are waiting for each other in circular form.</li>
</ul>
<p>quiz: 有 m 份不可共享的资源，有 n 个进程相互竞争，假设每个进程需求 ( S_i ) 那么他们满足什么样的数学关系可以保证没有死锁</p>
<p>An: 考虑极端情况，所有的进程都拿到了 ( S_i - 1 ) 份资源，那么再需要一份即可打破，那么数学关系式为 ( (S_i - 1) + 1 &lt;= m )，也就是 ( S_i &lt; m + n )</p>
<h2 id="methods-for-handling-deadlock">Methods for handling deadlock</h2>
<p>There are three ways to handle deadlock</p>
<h3 id="deadlock-prevention-or-avoidance">Deadlock prevention or avoidance</h3>
<p>We need to know all information about resources which the process WILL need beforehand.</p>
<h4 id="deadlock-prevention">Deadlock prevention</h4>
<p>which means we are to break one (or more) of the 4 Necessary Conditions</p>
<ul>
<li>Eliminate Hold and Wait:
<ul>
<li>Allocate all required resources to the process before the start of its execution.
<ul>
<li>会降低资源的利用度，比如明明进程要很久之后才用打印机的情况</li>
</ul></li>
<li>The process will make a new request for resources after releasing the current set of resources. This solution may lead to starvation. （为啥</li>
</ul></li>
<li>Eliminate No preemption: Each resource will be assigned with a numerical number. A process can request the resources increasing/decreasing the order of numbering. 没懂</li>
</ul>
<h4 id="deadlock-avoidance">Deadlock Avoidance</h4>
<p>The famous Deadlock avoidance algorithm is Bankers Algorithm</p>
<h3 id="deadlock-detection-and-recovery">Deadlock detection and recovery</h3>
<p>Let deadlock occur, then do preemption to handle it once occurred.</p>
<h3 id="ignore-the-problem-altogether">Ignore the problem altogether</h3>
<p>If the deadlock is very rare, then let it happen and reboot the system. This is the approach that both Windows and UNIX take.</p>
</body>
</html>
