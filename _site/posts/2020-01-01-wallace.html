<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="x-ua-compatible" content="ie=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Ryokou - 2020-01-01-wallace</title>
        <link rel="stylesheet" href="../web/static/main.css" />
        <script src="../web/static/main.bundle.js"></script>
        <style>
            header {
                width: 100%;
            }
            nav {
                width: 100%;
            }

            header nav {
                display: flex;
                justify-content: space-between;
            }

            footer {
                width: 100%;
                text-align: center;
            }
        </style>
    </head>

    <body>
        <header>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <style>
    /* main {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    article {
        max-width: 680px;
    } */
</style>

<main role="main">
    <h1>2020-01-01-wallace</h1>
    <article>
        <!-- <section class="header"></section> -->
        <section><p>注意到全加器接受三个输入并产生两个输出，可看作一个3: 2 compressor。Wallace 基于这个性质对乘法运算进行优化。</p>
<pre><code>                           a1   a2   a3   a4   a5   a6
X                          b1   b2   b3   b4   b5   b6
------------------------------------------------------
                         a1b6 a2b6 a3b6 a4b6 a5b6 a6b6
                    a1b5 a2b5 a3b5 a4b5 a5b5 a6b5
               a1b4 a2b4 a3b4 a4b4 a5b4 a6b4
          a1b3 a2b3 a3b3 a4b3 a5b3 a6b3
     a1b2 a2b2 a3b2 a4b2 a5b2 a6b2
a1b1 a2b1 a3b1 a4b1 a5b1 a6b1</code></pre>
<p>每一列的计算依赖前一列产生的进位，采用类似 Carry Save Adder 的想法，先直接进行计算，待产生进位数据后再加上进位</p>
<p>每三行看作一组，用全加器得到本位和以及进位，将进位数据左移一位</p>
<pre><code>                           a1   a2   a3   a4   a5   a6
X                          b1   b2   b3   b4   b5   b6
------------------------------------------------------
                        (a1b6 a2b6 a3b6 a4b6 a5b6 a6b6    =&gt;     
                    a1b5 a2b5 a3b5 a4b5 a5b5 a6b5
               a1b4 a2b4 a3b4 a4b4 a5b4 a6b4)
         (a1b3 a2b3 a3b3 a4b3 a5b3 a6b3
     a1b2 a2b2 a3b2 a4b2 a5b2 a6b2
a1b1 a2b1 a3b1 a4b1 a5b1 a6b1)</code></pre></section>
    </article>
</main>

    </body>
</html>
